@use 'sass:list';
@use '../variables.scss' as *;

.checkbox {
    @apply h-6 w-6 cursor-pointer appearance-none border border-base-content border-opacity-20;
    border-radius: var(--button-border-radius);
    --chkbg: var(--base-content);
    --chkfg: var(--base-100);

    &:focus-visible {
        outline: 2px solid hsl(var(--base-content));
        outline-offset: 2px;
    }

    &:checked,
    &[checked='true'] {
        @apply bg-base-content bg-no-repeat;
        animation: checkmark var(--animation-input, 0.2s) ease-in-out;
        background-image: linear-gradient(
                -45deg,
                transparent 65%,
                hsl(var(--chkbg)) 65.99%
            ),
            linear-gradient(45deg, transparent 75%, hsl(var(--chkbg)) 75.99%),
            linear-gradient(-45deg, hsl(var(--chkbg)) 40%, transparent 40.99%),
            linear-gradient(
                45deg,
                hsl(var(--chkbg)) 30%,
                hsl(var(--chkfg)) 30.99%,
                hsl(var(--chkfg)) 40%,
                transparent 40.99%
            ),
            linear-gradient(
                -45deg,
                hsl(var(--chkfg)) 50%,
                hsl(var(--chkbg)) 50.99%
            );
    }

    &:indeterminate {
        @apply bg-base-content bg-no-repeat;
        animation: checkmark var(--animation-input, 0.2s) ease-in-out;
        background-image: linear-gradient(
                90deg,
                transparent 80%,
                hsl(var(--chkbg)) 80%
            ),
            linear-gradient(-90deg, transparent 80%, hsl(var(--chkbg)) 80%),
            linear-gradient(
                0deg,
                hsl(var(--chkbg)) 43%,
                hsl(var(--chkfg)) 43%,
                hsl(var(--chkfg)) 57%,
                hsl(var(--chkbg)) 57%
            );
    }

    @each $color in list.join($brand-colors, $functional-colors) {
        &.checkbox-#{$color} {
            --chkbg: var(--#{$color});
            --chkfg: var(--#{$color}-content);
            @apply border-#{$color} hover:border-#{$color};

            &:focus-visible {
                outline: 2px solid hsl(var(--#{$color}));
            }

            &:checked,
            &[checked='true'] {
                @apply border-#{$color} bg-#{$color} text-#{$color}-content;
            }
        }
    }

    &:disabled {
        @apply cursor-not-allowed border-transparent bg-base-content opacity-20;
    }
}

@keyframes checkmark {
    0% {
        background-position-y: 5px;
    }
    50% {
        background-position-y: -2px;
    }
    100% {
        background-position-y: 0;
    }
}

body[dir='rtl'] {
    .checkbox {
        --chkbg: var(--base-content);
        --chkfg: var(--base-100);

        &:checked,
        &[checked='true'] {
            background-image: linear-gradient(
                    45deg,
                    transparent 65%,
                    hsl(var(--chkbg)) 65.99%
                ),
                linear-gradient(
                    -45deg,
                    transparent 75%,
                    hsl(var(--chkbg)) 75.99%
                ),
                linear-gradient(
                    45deg,
                    hsl(var(--chkbg)) 40%,
                    transparent 40.99%
                ),
                linear-gradient(
                    -45deg,
                    hsl(var(--chkbg)) 30%,
                    hsl(var(--chkfg)) 30.99%,
                    hsl(var(--chkfg)) 40%,
                    transparent 40.99%
                ),
                linear-gradient(
                    45deg,
                    hsl(var(--chkfg)) 50%,
                    hsl(var(--chkbg)) 50.99%
                );
        }
    }
}
